{% extends "base.html" %} {% block content %}
<section class="panel">
  <h1>Transactions</h1>
  <form method="post" class="form big">
    <div class="row">
      <label
        >Type
        <select name="type" class="big-input">
          <option>EXPENSE</option>
          <option>INCOME</option>
          <option>TRANSFER</option>
        </select>
      </label>
      <label
        >Account
        <select name="account_id" class="big-input">
          {% for a in accounts %}
          <option value="{{ a.id }}">{{ a.name }}</option>
          {% endfor %}
        </select>
      </label>
      <label
        >Amount
        <input
          class="big-input"
          type="number"
          step="0.01"
          name="amount"
          required
      /></label>
    </div>
    <div class="row">
      <label
        >Category
        <input class="big-input" name="category" placeholder="e.g. Groceries"
      /></label>
      <label
        >Merchant
        <input class="big-input" name="merchant" placeholder="e.g. Tesco"
      /></label>
      <label
        >Memo <input class="big-input" name="memo" placeholder="Optional note"
      /></label>
      <label
        >Date <input class="big-input" type="date" name="booked_at"
      /></label>
      <label
        >Transfer to
        <select name="transfer_account_id" class="big-input">
          <option value="">--</option>
          {% for a in accounts %}
          <option value="{{ a.id }}">{{ a.name }}</option>
          {% endfor %}
        </select>
      </label>
    </div>
    <button class="btn btn-primary btn-xl" type="submit">
      ➕ Add Transaction
    </button>
  </form>
</section>

<section class="panel">
  <h2>Filter</h2>
  <form class="row filter" method="get">
    <select name="type" class="big-input">
      <option value="">Type</option>
      <option>EXPENSE</option>
      <option>INCOME</option>
      <option>TRANSFER</option>
    </select>
    <select name="account_id" class="big-input">
      <option value="">Account</option>
      {% for a in accounts %}
      <option value="{{ a.id }}">{{ a.name }}</option>
      {% endfor %}
    </select>
    <input name="category" class="big-input" placeholder="Category" />
    <input type="date" name="date_from" class="big-input" />
    <input type="date" name="date_to" class="big-input" />
    <button class="btn btn-outline btn-lg" type="submit">Apply</button>
  </form>
</section>

<section class="list big-list">
  {% for t in transactions %}
  <div class="row item">
    <div>
      <div class="item-title">{{ t['type'] }} • {{ t['category'] or '—' }}</div>
      <div class="muted">
        {{ t['merchant'] or '' }} {{ t['memo'] and '• ' + t['memo'] or '' }}
      </div>
    </div>
    <div class="right">
      <div class="item-amount {{ 'bad' if t['type']=='EXPENSE' else 'good' }}">
        {{ '%.2f'|format(t['amount']) }}
      </div>
      <div class="muted">{{ t['booked_at'] }}</div>
    </div>
  </div>
  {% else %}
  <div class="empty">No transactions yet.</div>
  {% endfor %}
</section>
{% endblock %}
